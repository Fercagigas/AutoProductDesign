<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AutoProductDesign // Web Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              base: '#0A0A0F',
              panel: '#12121A',
              accent: '#F59E0B',
              success: '#10B981',
              text: '#E4E4E7'
            },
            fontFamily: {
              outfit: ['Outfit', 'sans-serif'],
              mono: ['IBM Plex Mono', 'monospace']
            }
          }
        }
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&family=Outfit:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      body {
        background: #0A0A0F;
        color: #E4E4E7;
      }
      .noise::before {
        content: '';
        position: fixed;
        inset: 0;
        pointer-events: none;
        opacity: 0.06;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.95' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
      }
      .glass {
        background: linear-gradient(145deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
        backdrop-filter: blur(7px);
        border: 1px solid rgba(245, 158, 11, 0.16);
      }
      .stagger-item {
        opacity: 0;
        transform: translateY(10px);
        transition: transform .45s cubic-bezier(.2,.8,.2,1), opacity .45s ease;
      }
      .stagger-item.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .spring-btn:active {
        transform: scale(0.97);
      }
      .status-dot {
        width: 0.55rem;
        height: 0.55rem;
        border-radius: 9999px;
        background: #3f3f46;
        box-shadow: 0 0 0 0 rgba(16,185,129,0.5);
      }
      .status-dot.live {
        background: #10B981;
        animation: pulse 1.6s infinite;
      }
      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(16,185,129,0.55); }
        70% { box-shadow: 0 0 0 8px rgba(16,185,129,0); }
        100% { box-shadow: 0 0 0 0 rgba(16,185,129,0); }
      }
      /* Markdown rendered content */
      .md-body h1 { font-size: 1.25rem; font-weight: 700; margin: 0.75rem 0 0.4rem; color: #F59E0B; }
      .md-body h2 { font-size: 1.1rem; font-weight: 700; margin: 0.6rem 0 0.35rem; color: #F59E0B; }
      .md-body h3 { font-size: 0.95rem; font-weight: 600; margin: 0.5rem 0 0.3rem; color: #fbbf24; }
      .md-body h4, .md-body h5, .md-body h6 { font-size: 0.875rem; font-weight: 600; margin: 0.4rem 0 0.25rem; color: #fbbf24; }
      .md-body p { margin: 0.35rem 0; line-height: 1.65; }
      .md-body ul, .md-body ol { margin: 0.35rem 0 0.35rem 1.25rem; }
      .md-body ul { list-style: disc; }
      .md-body ol { list-style: decimal; }
      .md-body li { margin: 0.15rem 0; line-height: 1.55; }
      .md-body li::marker { color: #F59E0B; }
      .md-body strong { color: #fbbf24; font-weight: 600; }
      .md-body em { color: #d4d4d8; font-style: italic; }
      .md-body code { background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.2); border-radius: 4px; padding: 0.1em 0.35em; font-size: 0.85em; color: #fbbf24; }
      .md-body pre { background: rgba(0,0,0,0.4); border: 1px solid rgba(63,63,70,0.5); border-radius: 8px; padding: 0.75rem 1rem; margin: 0.5rem 0; overflow-x: auto; }
      .md-body pre code { background: none; border: none; padding: 0; color: #e4e4e7; font-size: 0.8rem; }
      .md-body blockquote { border-left: 3px solid #F59E0B; padding-left: 0.75rem; margin: 0.5rem 0; color: #a1a1aa; }
      .md-body hr { border: none; border-top: 1px solid rgba(63,63,70,0.5); margin: 0.75rem 0; }
      .md-body a { color: #F59E0B; text-decoration: underline; text-underline-offset: 2px; }
      .md-body table { width: 100%; border-collapse: collapse; margin: 0.5rem 0; font-size: 0.8rem; }
      .md-body th { background: rgba(245,158,11,0.1); border: 1px solid rgba(63,63,70,0.5); padding: 0.35rem 0.5rem; text-align: left; color: #fbbf24; font-weight: 600; }
      .md-body td { border: 1px solid rgba(63,63,70,0.5); padding: 0.35rem 0.5rem; }
      .md-body img { max-width: 100%; border-radius: 8px; }
    </style>
  </head>
  <body class="noise min-h-screen font-mono">
    <main class="mx-auto max-w-7xl px-4 py-8 md:px-8">
      <header class="mb-8 flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
        <div>
          <p class="text-xs uppercase tracking-[0.25em] text-accent">Cyber Industrial Console</p>
          <h1 class="font-outfit text-3xl font-extrabold tracking-[-0.04em] md:text-5xl">AutoProductDesign Web</h1>
        </div>
        <div class="text-xs text-zinc-400">
          <span id="sessionLabel">Session: pending</span>
        </div>
      </header>

      <section class="grid gap-6 md:grid-cols-[65fr_35fr]">
        <article class="glass rounded-2xl p-5 md:p-7">
          <div id="feed" class="space-y-4"></div>
          <form id="messageForm" class="mt-6">
            <label for="prompt" class="mb-2 block text-xs uppercase tracking-[0.18em] text-zinc-400">Input</label>
            <textarea id="prompt" rows="4" class="w-full rounded-xl border border-zinc-700/70 bg-black/30 p-3 text-sm text-text outline-none transition focus:border-accent" placeholder="Describe tu proyecto o responde al agente..."></textarea>
            <button class="spring-btn mt-3 inline-flex items-center gap-2 rounded-xl border border-accent/60 bg-accent/10 px-5 py-2 text-sm font-semibold text-accent transition hover:bg-accent/20" type="submit">
              <i data-lucide="send" class="h-4 w-4"></i>
              Enviar
            </button>
          </form>
        </article>

        <aside class="space-y-6">
          <section class="glass rounded-2xl p-5">
            <h2 class="font-outfit text-lg font-bold tracking-[-0.02em]">Estado</h2>
            <dl class="mt-4 space-y-2 text-sm">
              <div class="flex justify-between"><dt class="text-zinc-400">Iteración</dt><dd id="iteration">0</dd></div>
              <div class="flex justify-between"><dt class="text-zinc-400">Human Review</dt><dd id="humanReview">No</dd></div>
              <div class="flex justify-between"><dt class="text-zinc-400">Workflow</dt><dd id="workflowStatus" class="text-zinc-200">Idle</dd></div>
              <div><dt class="mb-1 text-zinc-400">Vision</dt><dd id="vision" class="text-xs leading-relaxed text-zinc-200">Sin definir</dd></div>
            </dl>
          </section>

          <section class="glass rounded-2xl p-5">
            <h2 class="font-outfit text-lg font-bold tracking-[-0.02em]">Acciones rápidas</h2>
            <p class="mt-1 text-xs text-zinc-400">Atajos para acelerar prompts frecuentes.</p>
            <div id="quickPrompts" class="mt-3 grid gap-2">
              <button data-prompt="Quiero definir la visión de una app SaaS B2B. Ayúdame con objetivos y usuarios clave." class="rounded-lg border border-zinc-700/80 bg-black/20 px-3 py-2 text-left text-xs text-zinc-200 transition hover:border-accent/60 hover:text-accent">Definir visión de producto</button>
              <button data-prompt="Ready. Continúa con el siguiente debate y detalla riesgos técnicos prioritarios." class="rounded-lg border border-zinc-700/80 bg-black/20 px-3 py-2 text-left text-xs text-zinc-200 transition hover:border-accent/60 hover:text-accent">Continuar debate técnico</button>
              <button data-prompt="Necesito feedback de revisión humana: prioriza time-to-market y seguridad del MVP." class="rounded-lg border border-zinc-700/80 bg-black/20 px-3 py-2 text-left text-xs text-zinc-200 transition hover:border-accent/60 hover:text-accent">Enviar human review</button>
            </div>
          </section>

          <section class="glass rounded-2xl p-5">
            <h2 class="font-outfit text-lg font-bold tracking-[-0.02em]">Documentos</h2>
            <ul id="docs" class="mt-3 space-y-2 text-sm text-success"></ul>
          </section>
        </aside>
      </section>

      <section class="mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-800/80 bg-zinc-950/40 px-4 py-3 text-xs text-zinc-300 md:flex-row md:items-center md:justify-between">
        <div class="flex items-center gap-2">
          <span id="statusDot" class="status-dot" aria-hidden="true"></span>
          <span id="connectionStatus">Conectado. Listo para enviar instrucciones.</span>
        </div>
        <div class="flex items-center gap-4 text-zinc-400">
          <span id="charCounter">0 caracteres</span>
          <span id="messageCounter">0 mensajes</span>
        </div>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
